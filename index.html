<!doctype html>
<html lang="th" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏ó‡∏±‡∏Å‡∏©‡∏∞ Microsoft Office</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script>
    if (!window.elementSdk) {
      window.elementSdk = { init: async () => {}, setConfig: () => {}, config: {} };
    }
    if (!window.dataSdk) {
      window.dataSdk = { 
        create: async (data) => { 
            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            console.log("Mock Create:", data);
            return { isOk: true, id: Date.now().toString(), ...data }; 
        },
        list: async () => { return []; } // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
      };
    }
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body { box-sizing: border-box; font-family: 'Prompt', sans-serif; }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .float-animation { animation: float 3s ease-in-out infinite; }
    .game-card { transition: all 0.3s ease; cursor: pointer; }
    .game-card:hover { transform: translateY(-8px) scale(1.02); }
    .menu-popup { transform: translateX(100%); transition: transform 0.3s ease; }
    .menu-popup.active { transform: translateX(0); }
    .modal-overlay { backdrop-filter: blur(8px); }
    
    /* Game Styles */
    .correct-answer { background: linear-gradient(135deg, #10b981, #059669) !important; color: white !important; border-color: transparent !important; }
    .wrong-answer { background: linear-gradient(135deg, #ef4444, #dc2626) !important; color: white !important; border-color: transparent !important; }
    .selected-choice { border-color: #6366f1; background-color: #e0e7ff; }
    
    /* Gradients */
    .gradient-word { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
    .gradient-excel { background: linear-gradient(135deg, #22c55e, #16a34a); }
    .gradient-powerpoint { background: linear-gradient(135deg, #f97316, #ea580c); }
    
    .tab-active { background: white; color: #6366f1; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); }
    
    /* Matching Game */
    .match-item { transition: all 0.2s; }
    .match-selected { transform: scale(0.95); ring: 4px solid #6366f1; background-color: #e0e7ff; }
    .match-correct { opacity: 0; pointer-events: none; transform: scale(0); }
  </style>
</head>
<body class="h-full bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100 overflow-auto">
  <div id="app" class="h-full w-full">
    
    <header class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-40">
      <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center float-animation"><span class="text-2xl">üéÆ</span></div>
          <h1 id="site-title" class="text-xl md:text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏ó‡∏±‡∏Å‡∏©‡∏∞ Microsoft Office</h1>
        </div>
        <div class="flex items-center gap-3">
          <div id="user-info" class="hidden md:flex items-center gap-2 bg-indigo-50 px-4 py-2 rounded-full">
            <span id="user-icon" class="text-indigo-600">üë§</span> 
            <span id="user-name-display" class="text-indigo-700 font-medium"></span>
          </div>
          <button id="menu-btn" class="p-3 hover:bg-gray-100 rounded-full transition-colors">
            <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewbox="0 0 24 24"><circle cx="12" cy="5" r="2" /> <circle cx="12" cy="12" r="2" /> <circle cx="12" cy="19" r="2" /></svg>
          </button>
        </div>
      </div>
    </header>

    <div id="menu-overlay" class="fixed inset-0 bg-black/30 z-50 hidden"></div>
    <div id="menu-popup" class="menu-popup fixed right-0 top-0 h-full w-80 bg-white shadow-2xl z-50 overflow-y-auto">
      <div class="p-6">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-xl font-bold text-gray-800">‡πÄ‡∏°‡∏ô‡∏π</h2>
          <button id="close-menu" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
          </button>
        </div>
        <nav class="space-y-2">
          <button id="btn-admin" class="hidden w-full flex items-center gap-4 p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-colors text-left border border-red-200 mb-2">
            <div class="w-10 h-10 bg-red-200 rounded-lg flex items-center justify-center"><span class="text-xl">‚öôÔ∏è</span></div>
            <span class="font-medium text-red-700">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Admin)</span>
          </button>

          <button id="btn-register" class="w-full flex items-center gap-4 p-4 hover:bg-indigo-50 rounded-xl transition-colors text-left">
            <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center"><span class="text-xl">üìù</span></div><span class="font-medium text-gray-700">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span> 
          </button> 
          <button id="btn-login" class="w-full flex items-center gap-4 p-4 hover:bg-green-50 rounded-xl transition-colors text-left">
            <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"><span class="text-xl">üîë</span></div><span class="font-medium text-gray-700">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span> 
          </button> 
          <button id="btn-how-to-play" class="w-full flex items-center gap-4 p-4 hover:bg-blue-50 rounded-xl transition-colors text-left">
            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"><span class="text-xl">üìñ</span></div><span class="font-medium text-gray-700">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</span> 
          </button> 
          <button id="btn-logout" class="w-full flex items-center gap-4 p-4 hover:bg-red-50 rounded-xl transition-colors text-left hidden">
            <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"><span class="text-xl">üö™</span></div><span class="font-medium text-red-600">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span> 
          </button>
        </nav>
      </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 py-8">
      <div class="flex justify-center mb-8">
        <div class="bg-white/50 backdrop-blur rounded-2xl p-2 inline-flex gap-2">
          <button class="category-tab tab-active px-6 py-3 rounded-xl font-medium transition-all" data-category="word"> üìò Word </button> 
          <button class="category-tab px-6 py-3 rounded-xl font-medium transition-all text-gray-600 hover:bg-white/50" data-category="excel"> üìó Excel </button> 
          <button class="category-tab px-6 py-3 rounded-xl font-medium transition-all text-gray-600 hover:bg-white/50" data-category="powerpoint"> üìô PowerPoint </button>
        </div>
      </div>
      <div id="games-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        </div>
    </main>

    <footer class="bg-white/80 backdrop-blur-md mt-12 py-8">
      <div class="max-w-7xl mx-auto px-4 text-center">
        <div class="flex items-center justify-center gap-2 mb-4"><span class="text-2xl">üè´</span>
          <p id="footer-text" class="text-gray-600 font-medium">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤ ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à &amp; ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</p>
        </div>
        <p class="text-sm text-gray-400">¬© 2024 Microsoft Office Skills Training Game</p>
      </div>
    </footer>
  </div>

  <div id="modals-container"></div>

  <script>
    // ==================== Admin Config ====================
    const ADMIN_CONFIG = {
      email: "nopponpa853@gmail.com",
      password: "love_0965840062",
      name: "‡∏õ‡∏≤‡∏ô‡∏ï‡∏∞‡∏ß‡∏±‡∏ô ‡∏ã‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ï‡∏¢‡πå"
    };

    // ==================== Game Data ====================
    const gameData = {
      word: {
        name: 'Microsoft Word', icon: 'üìò', gradient: 'gradient-word',
        typing: [ { word: 'DOCUMENT', hint: 'D_C_M_NT', desc: '‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£' }, { word: 'PARAGRAPH', hint: 'P_R_GR_PH', desc: '‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤' } ],
        quiz: [ { q: '‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á Microsoft Word ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?', choices: ['.docx', '.xlsx', '.pptx', '.pdf'], answer: 0 },
                { q: '‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏±‡∏î Ctrl+S ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?', choices: ['‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å', '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤', '‡∏û‡∏¥‡∏°‡∏û‡πå'], answer: 1 } ],
        matching: [ { left: 'üìÑ', right: 'Document', id:1 }, { left: 'üî§', right: 'Font', id:2 }, { left: 'üíæ', right: 'Save', id:3 }, { left: 'üñ®Ô∏è', right: 'Print', id:4 } ],
        scenario: [ { title: '‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà', steps: ['‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Word', '‡∏Ñ‡∏•‡∏¥‡∏Å File', '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å New', '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå'] } ]
      },
      excel: {
        name: 'Microsoft Excel', icon: 'üìó', gradient: 'gradient-excel',
        typing: [ { word: 'FORMULA', hint: 'F_RM_LA', desc: '‡∏™‡∏π‡∏ï‡∏£' }, { word: 'WORKSHEET', hint: 'W_RKS_ _ET', desc: '‡πÅ‡∏ú‡πà‡∏ô‡∏á‡∏≤‡∏ô' } ],
        quiz: [ { q: '‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô SUM ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?', choices: ['‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô', '‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢', '‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤', '‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î'], answer: 2 },
                { q: '‡πÄ‡∏ã‡∏•‡∏•‡πå A1 ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á?', choices: ['‡πÅ‡∏ñ‡∏ß A ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå 1', '‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå A ‡πÅ‡∏ñ‡∏ß 1', '‡∏´‡∏ô‡πâ‡∏≤ A ‡∏Ç‡πâ‡∏≠ 1', '‡πÑ‡∏ü‡∏•‡πå A ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ 1'], answer: 1 } ],
        matching: [ { left: 'üìä', right: 'Chart', id:1 }, { left: '‚àë', right: 'Sum', id:2 }, { left: 'üìâ', right: 'Trend', id:3 }, { left: 'üî¢', right: 'Number', id:4 } ],
        scenario: [ { title: '‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏ï‡∏£‡∏ö‡∏ß‡∏Å', steps: ['‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏ã‡∏•‡∏•‡πå', '‡∏û‡∏¥‡∏°‡∏û‡πå =', '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÅ‡∏£‡∏Å', '‡∏Å‡∏î Enter'] } ]
      },
      powerpoint: {
        name: 'Microsoft PowerPoint', icon: 'üìô', gradient: 'gradient-powerpoint',
        typing: [ { word: 'SLIDE', hint: 'SL_D_', desc: '‡∏™‡πÑ‡∏•‡∏î‡πå' }, { word: 'ANIMATION', hint: 'AN_M_T_ _N', desc: '‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß' } ],
        quiz: [ { q: 'F5 ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö?', choices: ['‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å', '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠', '‡∏û‡∏¥‡∏°‡∏û‡πå', '‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå'], answer: 1 },
                { q: 'Transition ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?', choices: ['‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏', '‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡πÑ‡∏•‡∏î‡πå', '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ', '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ü‡∏≠‡∏ô‡∏ï‡πå'], answer: 1 } ],
        matching: [ { left: 'üé¨', right: 'Animation', id:1 }, { left: 'üñºÔ∏è', right: 'Slide', id:2 }, { left: 'üîÑ', right: 'Transition', id:3 }, { left: '‚ñ∂Ô∏è', right: 'Play', id:4 } ],
        scenario: [ { title: '‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡πÉ‡∏´‡∏°‡πà', steps: ['‡πÄ‡∏õ‡∏¥‡∏î PowerPoint', '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Template', '‡πÉ‡∏™‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠', '‡∏Ñ‡∏•‡∏¥‡∏Å Create'] } ]
      }
    };

    // ==================== State Management ====================
    let currentUser = null;
    let allData = [];
    let currentCategory = 'word';
    let isAdmin = false;

    // ==================== Initialization ====================
    async function init() {
        if(window.dataSdk) {
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
            const data = await window.dataSdk.list();
            allData = data || [];
            checkLoginStatus();
        }
        renderGames();
        setupEventListeners();
    }

    function setupEventListeners() {
        // Menu Toggle
        document.getElementById('menu-btn').addEventListener('click', () => {
            document.getElementById('menu-popup').classList.add('active');
            document.getElementById('menu-overlay').classList.remove('hidden');
        });
        document.getElementById('close-menu').addEventListener('click', closeMenu);
        document.getElementById('menu-overlay').addEventListener('click', closeMenu);

        // Buttons
        document.getElementById('btn-register').addEventListener('click', showRegisterModal);
        document.getElementById('btn-login').addEventListener('click', showLoginModal);
        document.getElementById('btn-admin').addEventListener('click', showAdminDashboard);
        document.getElementById('btn-logout').addEventListener('click', handleLogout);
        document.getElementById('btn-how-to-play').addEventListener('click', showHowToPlay);

        // Tabs
        document.querySelectorAll('.category-tab').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.category-tab').forEach(b => b.classList.remove('tab-active', 'text-white'));
                document.querySelectorAll('.category-tab').forEach(b => b.classList.add('text-gray-600'));
                e.target.classList.add('tab-active');
                e.target.classList.remove('text-gray-600');
                currentCategory = e.target.dataset.category;
                renderGames();
            });
        });
    }

    function closeMenu() {
        document.getElementById('menu-popup').classList.remove('active');
        document.getElementById('menu-overlay').classList.add('hidden');
    }

    // ==================== Render Functions ====================
    function renderGames() {
        const container = document.getElementById('games-container');
        const data = gameData[currentCategory];
        
        const games = [
            { id: 'typing', name: '‡πÄ‡∏Å‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå', icon: '‚å®Ô∏è', desc: '‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏®‡∏±‡∏û‡∏ó‡πå‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©' },
            { id: 'quiz', name: '‡πÄ‡∏Å‡∏°‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°', icon: '‚ùì', desc: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô' },
            { id: 'matching', name: '‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô', icon: 'üîó', desc: '‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠' },
            { id: 'scenario', name: '‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå', icon: 'üìã', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô' }
        ];

        container.innerHTML = games.map(g => `
            <div class="game-card bg-white p-6 rounded-3xl shadow-lg border-2 border-transparent hover:border-indigo-100" 
                 onclick="startGame('${g.id}')">
                <div class="h-48 ${data.gradient} rounded-2xl mb-4 flex items-center justify-center text-6xl text-white shadow-inner">
                    ${g.icon}
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">${g.name}</h3>
                <p class="text-gray-500 text-sm">${g.desc} ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö ${data.name}</p>
            </div>
        `).join('');
    }

    // ==================== Game Logic ====================
    function startGame(gameType) {
        if (!currentUser) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°');
            showLoginModal();
            return;
        }

        const data = gameData[currentCategory];
        let content = '';

        if (gameType === 'typing') {
            const vocab = data.typing[Math.floor(Math.random() * data.typing.length)];
            content = `
                <div class="p-6 text-center">
                    <h2 class="text-2xl font-bold mb-4">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</h2>
                    <p class="text-gray-500 mb-6">‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: ${vocab.desc}</p>
                    <div class="text-4xl font-mono bg-gray-100 p-4 rounded-xl mb-6 tracking-widest">${vocab.hint}</div>
                    <input type="text" id="typing-input" class="w-full text-center text-2xl p-3 border-2 rounded-xl mb-4 uppercase" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö..." autocomplete="off">
                    <button onclick="checkTyping('${vocab.word}')" class="w-full py-3 bg-indigo-600 text-white rounded-xl font-bold">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                </div>
            `;
        } else if (gameType === 'quiz') {
            const q = data.quiz[Math.floor(Math.random() * data.quiz.length)];
            content = `
                <div class="p-6">
                    <h2 class="text-xl font-bold mb-6">${q.q}</h2>
                    <div class="space-y-3">
                        ${q.choices.map((c, i) => `
                            <button onclick="checkQuiz(${i}, ${q.answer}, this)" class="w-full text-left p-4 rounded-xl border-2 border-gray-100 hover:border-indigo-200 transition-all">
                                ${c}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        } else if (gameType === 'matching') {
            const items = [...data.matching];
            const leftSide = items.map(i => ({ val: i.left, id: i.id, type: 'left' }));
            const rightSide = items.map(i => ({ val: i.right, id: i.id, type: 'right' }));
            // Shuffle
            leftSide.sort(() => Math.random() - 0.5);
            rightSide.sort(() => Math.random() - 0.5);

            content = `
                <div class="p-6">
                    <h2 class="text-xl font-bold mb-4 text-center">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠</h2>
                    <div class="grid grid-cols-2 gap-8">
                        <div class="space-y-3" id="match-left">
                            ${leftSide.map(i => `<div onclick="selectMatch(this, ${i.id}, 'left')" class="match-item p-4 bg-gray-50 rounded-xl text-center text-3xl cursor-pointer hover:bg-white shadow-sm border border-gray-200">${i.val}</div>`).join('')}
                        </div>
                        <div class="space-y-3" id="match-right">
                            ${rightSide.map(i => `<div onclick="selectMatch(this, ${i.id}, 'right')" class="match-item p-4 bg-gray-50 rounded-xl text-center text-lg font-bold cursor-pointer hover:bg-white shadow-sm border border-gray-200 flex items-center justify-center h-full">${i.val}</div>`).join('')}
                        </div>
                    </div>
                </div>
            `;
        } else if (gameType === 'scenario') {
            const s = data.scenario[0];
            // Shuffle steps
            const shuffledSteps = [...s.steps].sort(() => Math.random() - 0.5);
            content = `
                <div class="p-6">
                    <h2 class="text-xl font-bold mb-2">${s.title}</h2>
                    <p class="text-sm text-gray-500 mb-4">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô 1 - 4</p>
                    <div id="scenario-container" class="space-y-2">
                        ${shuffledSteps.map(step => `
                            <div onclick="selectScenarioStep(this)" class="scenario-step p-4 bg-white border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-indigo-400 text-gray-600 transition-colors">
                                ${step}
                            </div>
                        `).join('')}
                    </div>
                    <button onclick="checkScenario('${s.steps.join(',')}')" class="w-full mt-6 py-3 bg-green-600 text-white rounded-xl font-bold">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                </div>
            `;
        }

        showModal(content, 'game-modal');
    }

    // --- Typing Logic ---
    function checkTyping(answer) {
        const input = document.getElementById('typing-input').value.trim().toUpperCase();
        if (input === answer) {
            alert('‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üéâ');
            closeModal();
        } else {
            alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞ üòÖ');
            document.getElementById('typing-input').value = '';
        }
    }

    // --- Quiz Logic ---
    function checkQuiz(selected, correct, btn) {
        if (selected === correct) {
            btn.classList.add('correct-answer');
            setTimeout(() => {
                alert('‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å üéâ');
                closeModal();
            }, 500);
        } else {
            btn.classList.add('wrong-answer');
            alert('‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö ‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏≠‡∏∑‡πà‡∏ô‡∏î‡∏π‡∏ô‡∏∞');
        }
    }

    // --- Matching Logic ---
    let selectedLeft = null;
    let selectedRight = null;
    function selectMatch(el, id, type) {
        if (type === 'left') {
            if (selectedLeft) selectedLeft.el.classList.remove('match-selected');
            selectedLeft = { el, id };
            el.classList.add('match-selected');
        } else {
            if (selectedRight) selectedRight.el.classList.remove('match-selected');
            selectedRight = { el, id };
            el.classList.add('match-selected');
        }

        if (selectedLeft && selectedRight) {
            if (selectedLeft.id === selectedRight.id) {
                // Match!
                setTimeout(() => {
                    selectedLeft.el.classList.add('match-correct');
                    selectedRight.el.classList.add('match-correct');
                    selectedLeft = null;
                    selectedRight = null;
                    checkAllMatched();
                }, 300);
            } else {
                // Wrong
                setTimeout(() => {
                    selectedLeft.el.classList.remove('match-selected');
                    selectedRight.el.classList.remove('match-selected');
                    selectedLeft.el.classList.add('bg-red-100');
                    selectedRight.el.classList.add('bg-red-100');
                    setTimeout(() => {
                        if(selectedLeft?.el) selectedLeft.el.classList.remove('bg-red-100');
                        if(selectedRight?.el) selectedRight.el.classList.remove('bg-red-100');
                        selectedLeft = null;
                        selectedRight = null;
                    }, 500);
                }, 300);
            }
        }
    }
    function checkAllMatched() {
        const remaining = document.querySelectorAll('.match-item:not(.match-correct)');
        if (remaining.length === 0) {
            alert('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß üéâ');
            closeModal();
        }
    }

    // --- Scenario Logic ---
    let scenarioOrder = [];
    function selectScenarioStep(el) {
        if (el.classList.contains('bg-indigo-100')) {
            // Deselect
            el.classList.remove('bg-indigo-100', 'border-indigo-500');
            el.innerHTML = el.innerText.substring(3); // Remove numbering
            scenarioOrder = scenarioOrder.filter(item => item !== el.innerText);
        } else {
            // Select
            scenarioOrder.push(el.innerText.trim());
            el.classList.add('bg-indigo-100', 'border-indigo-500');
            el.innerHTML = `<span class="font-bold text-indigo-600 mr-2">${scenarioOrder.length}.</span> ${el.innerText}`;
        }
    }
    function checkScenario(correctString) {
        const currentString = scenarioOrder.join(',');
        if (currentString === correctString) {
            alert('‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö üéâ');
            closeModal();
        } else {
            alert('‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞');
            // Reset
            scenarioOrder = [];
            const steps = document.querySelectorAll('.scenario-step');
            steps.forEach(s => {
                s.classList.remove('bg-indigo-100', 'border-indigo-500');
                if (s.innerText.match(/^\d+\./)) {
                    s.innerText = s.innerText.substring(s.innerText.indexOf(' ') + 1);
                }
            });
        }
    }


    // ==================== Auth Logic & Admin ====================
    function checkLoginStatus() {
        const savedEmail = localStorage.getItem('currentUserEmail');
        
        // Admin Check
        if (savedEmail === ADMIN_CONFIG.email) {
            currentUser = { name: ADMIN_CONFIG.name, email: ADMIN_CONFIG.email };
            isAdmin = true;
            updateUIForLoggedIn();
            return;
        }

        // User Check
        if (savedEmail) {
            const user = allData.find(d => d.user_type === 'user' && d.email === savedEmail);
            if (user) {
                currentUser = user;
                isAdmin = false;
                updateUIForLoggedIn();
            }
        }
    }

    function updateUIForLoggedIn() {
        const userDisplay = document.getElementById('user-name-display');
        const userIcon = document.getElementById('user-icon');
        const adminBtn = document.getElementById('btn-admin');

        document.getElementById('user-info').classList.remove('hidden');
        
        if (isAdmin) {
            userDisplay.innerHTML = `üõ°Ô∏è ${currentUser.name} (Admin)`;
            userDisplay.classList.add('text-red-600');
            userIcon.textContent = 'üõ°Ô∏è';
            adminBtn.classList.remove('hidden');
        } else {
            userDisplay.textContent = currentUser.name;
            userDisplay.classList.remove('text-red-600');
            userIcon.textContent = 'üë§';
            adminBtn.classList.add('hidden');
        }

        document.getElementById('btn-register').classList.add('hidden');
        document.getElementById('btn-login').classList.add('hidden');
        document.getElementById('btn-logout').classList.remove('hidden');
    }

    function handleLogout() {
        localStorage.removeItem('currentUserEmail');
        currentUser = null;
        isAdmin = false;
        
        document.getElementById('user-info').classList.add('hidden');
        document.getElementById('btn-register').classList.remove('hidden');
        document.getElementById('btn-login').classList.remove('hidden');
        document.getElementById('btn-logout').classList.add('hidden');
        document.getElementById('btn-admin').classList.add('hidden');
        
        closeMenu();
        alert('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
    }

    // ==================== Admin Dashboard ====================
    function showAdminDashboard() {
        closeMenu();
        let tableRows = '';
        if (allData.length === 0) {
            tableRows = '<tr><td colspan="3" class="p-4 text-center text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</td></tr>';
        } else {
            tableRows = allData.filter(u => u.user_type === 'user').map(u => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-3">${u.name}</td>
                    <td class="p-3 text-gray-600">${u.email}</td>
                    <td class="p-3 text-sm text-gray-400">${u.password ? '******' : '-'}</td>
                </tr>
            `).join('');
        }

        const content = `
            <div class="p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6 border-b pb-4">
                    <span class="text-3xl">üõ°Ô∏è</span>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
                        <p class="text-sm text-gray-500">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ${ADMIN_CONFIG.name}</p>
                    </div>
                </div>
                <div class="bg-indigo-50 p-4 rounded-xl mb-6">
                    <h3 class="font-bold text-indigo-800 mb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h3>
                    <div class="flex gap-4">
                        <div class="bg-white px-4 py-2 rounded-lg shadow-sm">
                            <span class="text-gray-500 text-xs block">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                            <span class="text-xl font-bold text-indigo-600">${allData.filter(u => u.user_type === 'user').length} ‡∏Ñ‡∏ô</span>
                        </div>
                    </div>
                </div>
                <h3 class="font-bold text-gray-700 mb-3">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</h3>
                <div class="overflow-x-auto rounded-xl border border-gray-200">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50 text-gray-600 uppercase text-xs">
                            <tr><th class="p-3">‡∏ä‡∏∑‡πà‡∏≠</th><th class="p-3">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th><th class="p-3">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</th></tr>
                        </thead>
                        <tbody class="text-sm">${tableRows}</tbody>
                    </table>
                </div>
                <button onclick="closeModal()" class="w-full mt-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300 transition-colors">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
            </div>
        `;
        showModal(content, 'admin-modal');
    }

    // ==================== Modals & Helpers ====================
    function showModal(content, id = 'modal') {
        const container = document.getElementById('modals-container');
        container.innerHTML = `
            <div id="${id}" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-overlay bg-black/50">
                <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full max-h-[90%] overflow-y-auto animate-in">
                    ${content}
                </div>
            </div>
        `;
        document.getElementById(id).addEventListener('click', (e) => {
           if(e.target.id === id) closeModal();
        });
    }

    function closeModal() {
        document.getElementById('modals-container').innerHTML = '';
    }

    function showHowToPlay() {
        closeMenu();
        const content = `
            <div class="p-8 text-center">
                <span class="text-6xl mb-4 block">üìñ</span>
                <h2 class="text-2xl font-bold mb-4">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
                <p class="text-gray-600 mb-6">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° (Word, Excel, PowerPoint) ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏ó‡∏±‡∏Å‡∏©‡∏∞</p>
                <button onclick="closeModal()" class="w-full py-3 bg-indigo-600 text-white rounded-xl">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß</button>
            </div>
        `;
        showModal(content);
    }

    // ==================== Auth Forms ====================
    function showRegisterModal() {
        closeMenu();
        const content = `
            <div class="p-8">
                <h2 class="text-2xl font-bold text-center mb-6">üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
                <form id="register-form" class="space-y-4">
                    <div><label class="block text-sm font-medium mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label><input type="email" id="reg-email" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                    <div><label class="block text-sm font-medium mb-1">‡∏ä‡∏∑‡πà‡∏≠</label><input type="text" id="reg-name" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                    <div><label class="block text-sm font-medium mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label><input type="password" id="reg-pass" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                    <div id="reg-error" class="hidden text-red-500 text-sm text-center"></div>
                    <button type="submit" class="w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
                </form>
            </div>
        `;
        showModal(content);
        document.getElementById('register-form').addEventListener('submit', handleRegister);
    }

    async function handleRegister(e) {
        e.preventDefault();
        const email = document.getElementById('reg-email').value.trim();
        const name = document.getElementById('reg-name').value.trim();
        const password = document.getElementById('reg-pass').value;
        const errorDiv = document.getElementById('reg-error');

        if (email === ADMIN_CONFIG.email) {
            errorDiv.textContent = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ"; errorDiv.classList.remove('hidden'); return;
        }
        if (allData.find(u => u.email === email)) {
            errorDiv.textContent = "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß"; errorDiv.classList.remove('hidden'); return;
        }

        // Save logic
        const newUser = { user_type: 'user', email, name, password, createdAt: new Date().toISOString() };
        await window.dataSdk.create(newUser);
        allData.push(newUser);
        alert('‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
        showLoginModal();
    }

    function showLoginModal() {
        closeMenu();
        const content = `
            <div class="p-8">
                <h2 class="text-2xl font-bold text-center mb-6">üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <form id="login-form" class="space-y-4">
                    <div><label class="block text-sm font-medium mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label><input type="email" id="login-email" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-green-500 outline-none"></div>
                    <div><label class="block text-sm font-medium mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label><input type="password" id="login-pass" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-green-500 outline-none"></div>
                    <div id="login-error" class="hidden text-red-500 text-sm text-center"></div>
                    <button type="submit" class="w-full py-3 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                </form>
            </div>
        `;
        showModal(content);
        document.getElementById('login-form').addEventListener('submit', handleLogin);
    }

    async function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('login-email').value.trim();
        const password = document.getElementById('login-pass').value;
        const errorDiv = document.getElementById('login-error');

        if (email === ADMIN_CONFIG.email && password === ADMIN_CONFIG.password) {
            localStorage.setItem('currentUserEmail', email);
            checkLoginStatus();
            closeModal();
            alert(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô${ADMIN_CONFIG.name}`);
            return;
        }

        const user = allData.find(u => u.email === email && u.password === password);
        if (user) {
            localStorage.setItem('currentUserEmail', email);
            checkLoginStatus();
            closeModal();
            alert(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ${user.name}`);
        } else {
            errorDiv.textContent = "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
            errorDiv.classList.remove('hidden');
        }
    }

    // Start App
    init();
  </script>
</body>
</html>